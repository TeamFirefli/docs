---
title: "Automation (Cronjobs)"
description: "Firefli has 4 ready-to-go cronjobs available to make changes in the background."
icon: "briefcase"
---

Automation is optional and ran independently from Firefli.\
Without these, you'll need to manually refresh certain aspects of your Workspace.

You'll only need to set these up if you're self-hosting.\
We handle it for you on [App](https://www.firefli.net/).

<Warning>
  You must be on Firefli 1.0.1 or later.
</Warning>

### Self-Hosting

This section is for anyone running Firefli on a dedicated or virtual linux based operating system.

<Steps>
  <Step>
    <h4>Create automation environment file</h4>
    <p>In your root folder, create a file named .automation_env</p>

   ```
   nano /root/.automation_env
   ```
  </Step>
  <Step>
    <h4>Insert secret key</h4>
    <p>Insert a 32 character secret key and save (**X** -\> **Y** -\> **Enter**).</p>

   ```
   export CRON_SECRET='INSERT_CODE_HERE'
   ```
  </Step>
  <Step>
    <h4>Add to Firefli .env</h4>
    <p>Next, you'll need to add this to Firefli **.env** and save (**X** -\> **Y** -\> **Enter**).</p>

   ```
   nano /root/firefli/.env
   ```

   ```
   CRON_SECRET="INSERT_SAME_CODE"
   ```
  </Step>
  <Step>
    <h4>Insert into Crontab</h4>
    <p>Next we'll need to insert the code into **Crontab.**</p>

   ```
   crontab -e
   ```

   <p>At the bottom of the file, paste the following. Be sure to change the URL to your own.\
   Once done, save. (**X** -\> **Y** -\> **Enter**)</p>

   ```
   * * * * * . /root/.automation_env && /usr/bin/curl -fsS -X POST 'https://your.domain.com/api/cron/update-sessions' -H "x-cron-secret: $CRON_SECRET" | /usr/bin/jq -r || true
   0 * * * * . /root/.automation_env && /usr/bin/curl -fsS -X POST 'https://your.domain.com/api/cron/update-roles' -H "x-cron-secret: $CRON_SECRET" | /usr/bin/jq -r || true
   0 0 * * * . /root/.automation_env && /usr/bin/curl -fsS -X POST 'https://your.domain.com/api/cron/birthdays' -H "x-cron-secret: $CRON_SECRET" | /usr/bin/jq -r || true
   0 2 * * * . /root/.automation_env && /usr/bin/curl -fsS -X POST 'https://your.domain.com/api/cron/reset-activity' -H "x-cron-secret: $CRON_SECRET" | /usr/bin/jq -r || true
   ```

   If you're using NEXT_MULTI in .env, please use the following cronjob for updating roles.
   ```
   */15 * * * * . /root/.automation_env && /usr/bin/curl -fsS -X POST 'https://your.domain.com/api/cron/update-roles' -H "x-cron-secret: $CRON_SECRET" | /usr/bin/jq -r || true
   ```
  </Step>
  <Step>
    <h4>Done!</h4>
    <p>- Your group roles will now automatically sync every hour adding any new members to your workspace.</p>
    <p>- Your session statuses will now update in accordance with the statuses setup enhancing your API Development Opportunities.</p>
    <p>- Your birthdays will now announce in Discord at midnight (UTC).</p>
    <p>- Activity will now be reset in according to your frequency defined in settings.</p>
  </Step>
</Steps>

## Next steps

<CardGroup cols={3} gap="medium">
  <Card title="Self-hosting deployment" icon="server" href="/quickstart">
    QuickStart guide.
  </Card>
  <Card title="Self-hosting deployment" icon="server" href="/deployment/selfhost">
    Review the full self-hosting checklist to make sure your environment is production ready.
  </Card>
  <Card title="Activity & roles APIs" icon="brackets" href="/api-references/introduction">
    Combine automation with the public API to build dashboards, bots, or external tooling.
  </Card>

</CardGroup>
